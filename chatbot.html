<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Word Learning Game</title>
    <script src="https://unpkg.com/jspsych@8.0.0"></script>
    <script src="https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.0.0"></script>
    <link href="https://unpkg.com/jspsych@8.0.0/css/jspsych.css" rel="stylesheet" type="text/css" />
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/@jspsych/plugin-preload@2.0.0"></script>
    <script src="https://unpkg.com/@jspsych-contrib/plugin-pipe"></script>
    <script src="https://unpkg.com/@jspsych/plugin-html-button-response@2.0.0"></script>
    <script src="https://unpkg.com/@jspsych/plugin-fullscreen@2.0.0"></script>
    <script src="https://unpkg.com/@jspsych/plugin-survey-html-form@1.0.0"></script>


    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: 'Poppins', sans-serif;
      }
  
      body {
        background: linear-gradient(135deg, #cfd9df, #e2ebf0);
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        width: 100%;
        overflow-x: hidden;
        color: #333;
      }
  
      .jspsych-display-element {
        max-width: 100%;
        text-align: center;
        padding: 50px;
        background: #ffffff;
        box-shadow: 0px 10px 20px rgba(0, 0, 0, 0.1);
        border-radius: 12px;
        transition: transform 0.3s ease;
        position: relative;
        overflow: hidden;
        width: 100%;
      }
  
      .jspsych-display-element:hover {
        transform: scale(1.02);
      }
  
      .jspsych-html-keyboard-response-stimulus {
        font-size: 1.4em;
        color: #4a4a4a;
        line-height: 1.8;
        margin-bottom: 1.5em;
        text-align: center;
        width: 100%;
      }
  
   
      .press-any-key {
        opacity: 0;
        font-weight: bold;
        margin-top: 20px;
        transition: opacity 0.5s ease;
      }
  
      .image-container {
        display: flex;
        justify-content: space-around;
        align-items: center;
        padding: 20px;
        gap: 80px;
        width: 100%;
        flex-wrap: wrap;
      }
  
     
    /* Hover effect for fullscreen button */
    .jspsych-fullscreen-btn:hover {
      transform: scale(1.05);
      box-shadow: 0px 8px 20px rgba(0, 0, 0, 0.3);
    }

    /* Responsive design for smaller screens */
    @media (max-width: 768px) {
      .image-container img {
        width: 80%; /* Scale down images for mobile */
      }

      .jspsych-html-keyboard-response-stimulus {
        font-size: 1.2em; /* Smaller font for text */
      }

      .timer {
        font-size: 1.5em; /* Adjust timer size */
      }
    }
    </style>  
  </head>
  <body>
    <script>
      // Initialize jsPsych experiment
      var jsPsych = initJsPsych({
        override_safe_mode: true
      });
      var timeline = [];
      
      // Define Fullscreen trial
      var enter_fullscreen = {
        type: jsPsychFullscreen,
        fullscreen_mode: true,
        message: `
          <div style="font-size: 36px; line-height: 1; color: #333; text-align: left; margin-bottom: 30px;">
              This study should be taken in fullscreen mode.<br><br>
              Please press the button below to continue.
          </div>
        `,
      };
      timeline.push(enter_fullscreen);
      
      // Define Welcome trial
      var welcome = {
        type: jsPsychHtmlKeyboardResponse,
        stimulus: `
          <div class="jspsych-html-keyboard-response-stimulus">
            <p style="font-size: 48px;">Welcome to the experiment! ðŸ˜Š</p>
            <p style="font-size: 36px;">Press any key to begin.</p>
          </div>
        `,
      };
      timeline.push(welcome);
      
      var consent_form = {
  type: jsPsychHtmlButtonResponse,
  stimulus: `
    <div style="max-width:1000px; width:90%; margin: 30px auto; background: #fff; border: 2px solid #ddd; border-radius: 10px; padding: 30px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
      <h1 style="text-align: left; font-family: 'Poppins', sans-serif; color: #333;">Consent Form</h1>
      <div style="max-height: 500px; overflow-y: auto; margin: 20px 0; font-size: 16px; line-height: 1.6; color: #555; text-align: left;">
        <p>
          You are being invited to participate in a research study titled "<strong>Strategies for Building Trust with Automated Agent Systems: Examining the Impact of Communication Styles in Chatbots</strong>." This study is being conducted by Dr. Trevor Bonjour from UC San Diego and graduate researchers in the Department of Computational Social Science.
        </p>
        <p>
          The purpose of this study is to better understand how communication styles, such as tone, pacing, and emotional expression, influence user engagement and trust when interacting with virtual conversational agents. Your participation in this research should take approximately 45-60 minutes to complete.
        </p>
        <h2 style="color: #333; text-align: left;">What You Will Do:</h2>
        <ul style="text-align: left;">
          <li>You will interact with three virtual agents that use different communication styles. Each interaction will last about 3-5 minutes.</li>
          <li>After each interaction, you will complete a short survey to provide feedback about your experience.</li>
          <li>Your interactions will be audio-recorded for later transcription and analysis.</li>
        </ul>
        <h2 style="color: #333; text-align: left;">Confidentiality:</h2>
        <ul style="text-align: left;">
          <li>Your responses will be anonymized using a unique participant ID.</li>
          <li>Any audio recordings will be stored securely on encrypted servers.</li>
          <li>Your responses will be shared only in de-identified, aggregated form.</li>
          <li>Your data may be retained indefinitely and used for future research.</li>
        </ul>
        <p>
          If you have questions, contact Dr. Trevor Bonjour (<a href="mailto:tbonjour@ucsd.edu" style="color: #2575fc;">tbonjour@ucsd.edu</a>) or the UC San Diego IRB Administration (<a href="mailto:irb@ucsd.edu" style="color: #2575fc;">irb@ucsd.edu</a>, 858-246-4777).
        </p>
      </div>
    </div>
  `,
  choices: ["I Consent"],
  on_finish: function(data) {
    console.log("Consent form completed");
  }
};

timeline.push(consent_form);

      // Talk-to Agent trial with ElevenLabs widget
      var talk_to_agent_widget = {
  type: jsPsychHtmlButtonResponse,
  stimulus: `
  <div style="text-align: center; position: relative;">
  <h2 style="font-size: 48px; margin-bottom: 30px;">Talk to Hope</h2>
  <p style="font-size: 24px; color: #555; margin-bottom: 20px;">
    Please click the 'Let's chat' button on the bottom-right corner to chat with the bot.
  </p>
  <p style="font-size:24px; color: #555;">
    You must chat with the bot for at least 3 minutes before you can proceed to the next bot.
  </p>
</div>
      <div id="widget-container" style="margin-top: 20px;"></div>
      <!-- The continue button is initially disabled -->
      <button id="continue-button" disabled style="
        display: block;
        margin: 20px auto;
        padding: 10px 20px;
        font-size: 16px;
        border: none;
        background-color: grey;
        color: #fff;
        border-radius: 5px;
        cursor: not-allowed;
      ">
        Continue
      </button>
    </div>
  `,
  choices: [], // No built-in choices, we handle response manually.
  trial_duration: null, // The trial waits indefinitely until finished.
  on_load: function() {
    // Insert the ElevenLabs widget into the container
    var container = document.getElementById("widget-container");
    var widget = document.createElement("elevenlabs-convai");
    widget.setAttribute("agent-id", "xHPpWVYMoypoMsJji7PC");
    container.appendChild(widget);
    
    var script = document.createElement("script");
    script.src = "https://elevenlabs.io/convai-widget/index.js";
    script.async = true;
    script.type = "text/javascript";
    container.appendChild(script);
    
    // After 5 minutes (300000 ms), enable the Continue button.
    setTimeout(function() {
      var btn = document.getElementById("continue-button");
      btn.disabled = false;
      btn.style.backgroundColor = "black";
      btn.style.cursor = "pointer";
    }, 0);
    
    // Finish the trial when the Continue button is clicked (only if enabled).
    document.getElementById("continue-button").addEventListener("click", function() {
      if (!this.disabled) {
        jsPsych.finishTrial();
      }
    });
  }
};

timeline.push(talk_to_agent_widget);

var survey_engagement_bot1 = {
  type: jsPsychSurveyHtmlForm,
  data: { bot: 'Bot1' },
  html: `
    <style>
      /* Global reset */
      body, html {
        margin: 0;
        padding: 0;
        font-family: 'Poppins', sans-serif;
        background-color: #f0f0f0;
      }
      
      /* Main container for the survey */
      .survey-container {
        max-width: 1200px; /* Adjust the max-width as needed */
        margin: 20px auto; /* Extra vertical space */
        padding: 40px; /* Padding for breathing room */
      }
      
      /* Survey Title */
      h2 {
        text-align: center;
        margin-top: 20px;
        margin-bottom: 30px;
        font-size: 36px;
        color: #333;
      }
      
      /* Container for each question */
      .question-container {
        margin-bottom: 0px;
        padding: 0 20px;
      }
      
      /* Left-aligned question text */
      .question-container p.question {
        font-size: 22px;
        color: #555;
        text-align: left;
        margin: 20px 0 10px;
      }
      
      /* Options are centered and evenly spread */
      .options {
        display: flex;
        justify-content: space-evenly;
        align-items: center;
      }
      
      .options label {
        cursor: pointer;
        font-size: 20px;
        color: #333;
      }
      
      .options input[type="radio"] {
        margin-right: 5px;
        transform: scale(1.2);
      }
      
      /* Enhanced Submit Button Style */
      .jspsych-survey-html-form input[type="submit"] {
        display: block;
        margin: 0px auto 0px auto;  /* Reduced margin to bring the button closer to the content */
        padding: 60px 130px;         /* Increased padding for a larger button */
        font-size: 36px;             /* Bigger font size */
        color: #fff;
        background: linear-gradient(45deg, #2575fc, #6a11cb);
        border: none;
        border-radius: 8px;
        cursor: pointer;
        box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
      }
      
      .jspsych-survey-html-form input[type="submit"]:hover {
        transform: scale(1.05);
        box-shadow: 0 6px 12px rgba(0,0,0,0.3);
      }
      
      /* Responsive Adjustments */
      @media (max-width: 600px) {
        h2 {
          font-size: 28px;
        }
        .question-container p.question {
          font-size: 18px;
        }
        .jspsych-survey-html-form input[type="submit"] {
          font-size: 28px;
          padding: 30px 80px;
        }
        .survey-container {
          padding: 20px; /* Reduce padding for smaller screens */
        }
      }
    </style>
    
    <div class="survey-container">
      <h2>Post-Chatbot Survey: Engagement and Approachability</h2>
      
      <div class="question-container">
        <p class="question">1. How easy or difficult was it to engage in conversation with this agent? (1 = Very Difficult, 5 = Very Easy)</p>
        <div class="options">
          <label><input type="radio" name="q1" value="1" required> 1</label>
          <label><input type="radio" name="q1" value="2"> 2</label>
          <label><input type="radio" name="q1" value="3"> 3</label>
          <label><input type="radio" name="q1" value="4"> 4</label>
          <label><input type="radio" name="q1" value="5"> 5</label>
        </div>
      </div>
      
      <div class="question-container">
        <p class="question">2. Did this agent feel friendly and approachable to you? (1 = Strongly Disagree, 5 = Very Agree)</p>
        <div class="options">
          <label><input type="radio" name="q2" value="1" required> 1</label>
          <label><input type="radio" name="q2" value="2"> 2</label>
          <label><input type="radio" name="q2" value="3"> 3</label>
          <label><input type="radio" name="q2" value="4"> 4</label>
          <label><input type="radio" name="q2" value="5"> 5</label>
        </div>
      </div>
      
      <div class="question-container">
        <p class="question">3. How would you rate this agentâ€™s engagement level and friendliness? (1 = Very Low, 5 = Very High)</p>
        <div class="options">
          <label><input type="radio" name="q3" value="1" required> 1</label>
          <label><input type="radio" name="q3" value="2"> 2</label>
          <label><input type="radio" name="q3" value="3"> 3</label>
          <label><input type="radio" name="q3" value="4"> 4</label>
          <label><input type="radio" name="q3" value="5"> 5</label>
        </div>
      </div>
      
      <div class="question-container">
        <p class="question">4. How natural did the conversation feel with this agent overall? (1 = Not Natural, 5 = Very Natural)</p>
        <div class="options">
          <label><input type="radio" name="q4" value="1" required> 1</label>
          <label><input type="radio" name="q4" value="2"> 2</label>
          <label><input type="radio" name="q4" value="3"> 3</label>
          <label><input type="radio" name="q4" value="4"> 4</label>
          <label><input type="radio" name="q4" value="5"> 5</label>
        </div>
      </div>
      
      <div class="question-container">
        <p class="question">5. Did the agentâ€™s tone or language make you feel comfortable sharing your thoughts? (1 = Strongly Disagree, 5 = Very Agree)</p>
        <div class="options">
          <label><input type="radio" name="q5" value="1" required> 1</label>
          <label><input type="radio" name="q5" value="2"> 2</label>
          <label><input type="radio" name="q5" value="3"> 3</label>
          <label><input type="radio" name="q5" value="4"> 4</label>
          <label><input type="radio" name="q5" value="5"> 5</label>
        </div>
      </div>
      
      <div class="question-container">
        <p class="question">6. Did the timing and pauses in the conversation feel natural, or were they distracting? (1 = Very Distracting, 5 = Very Natural)</p>
        <div class="options">
          <label><input type="radio" name="q6" value="1" required> 1</label>
          <label><input type="radio" name="q6" value="2"> 2</label>
          <label><input type="radio" name="q6" value="3"> 3</label>
          <label><input type="radio" name="q6" value="4"> 4</label>
          <label><input type="radio" name="q6" value="5"> 5</label>
        </div>
      </div>
      
      <!-- The submit button is generated automatically by jsPsych and styled above -->
    </div>
  `,
  button_label: "Next",
  on_finish: function(data) {
    // Define your Google Apps Script web app URL here
    var url = "https://script.google.com/macros/s/AKfycbz3KN61mymNRZV5ReJ0zvowOBRCNm_uFQR4k8hK8dRWta74EFMpqkWnzhLsIDDEndUGcA/exec";
    
    // Send the survey data to Google Sheets
    fetch(url, {
      method: 'POST',
      mode: 'no-cors', 
      body: JSON.stringify(data),
      headers: { 'Content-Type': 'application/json' }
    })
    .then(response => response.json())
    .then(result => {
      console.log("Data successfully sent to Google Sheets:", result);
      // Optionally, you can add additional logic here after the data is sent
    })
    .catch(error => {
      console.error("Error sending data:", error);
    });
    
    console.log("Bot1 Engagement survey completed");
  }
};


var survey_emotional_bot1 = {
  type: jsPsychSurveyHtmlForm,
  data: { bot: 'Bot1' },
  html: `
    <style>
      /* Global reset */
      body, html {
        margin: 0;
        padding: 0;
        font-family: 'Poppins', sans-serif;
        background-color: #f0f0f0;
      }
      
      /* Main container for the survey */
      .survey-container {
        max-width: 1200px; /* Adjust the max-width as needed */
        margin: -20px auto; /* Extra vertical space */
        padding: 40px; /* Padding for breathing room */
      }
      
      /* Survey Title */
      h2 {
        text-align: center;
        margin-top: 20px;
        margin-bottom: 30px;
        font-size: 36px;
        color: #333;
      }
      
      /* Container for each question */
      .question-container {
        margin-bottom: 0px;
        padding: 0 20px;
      }
      
      /* Left-aligned question text */
      .question-container p.question {
        font-size: 22px;
        color: #555;
        text-align: left;
        margin: 20px 0 10px;
      }
      
      /* Options are centered and evenly spread */
      .options {
        display: flex;
        justify-content: space-evenly;
        align-items: center;
      }
      
      .options label {
        cursor: pointer;
        font-size: 20px;
        color: #333;
      }
      
      .options input[type="radio"] {
        margin-right: 5px;
        transform: scale(1.2);
      }
      
      /* Enhanced Submit Button Style */
      .jspsych-survey-html-form input[type="submit"] {
        display: block;
        margin: -50px auto 0px auto;  /* Reduced margin to bring the button closer to the content */
        padding: 60px 130px;         /* Increased padding for a larger button */
        font-size: 36px;             /* Bigger font size */
        color: #fff;
        background: linear-gradient(45deg, #2575fc, #6a11cb);
        border: none;
        border-radius: 8px;
        cursor: pointer;
        box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
      }
      
      .jspsych-survey-html-form input[type="submit"]:hover {
        transform: scale(1.05);
        box-shadow: 0 6px 12px rgba(0,0,0,0.3);
      }
      
      /* Responsive Adjustments */
      @media (max-width: 600px) {
        h2 {
          font-size: 28px;
        }
        .question-container p.question {
          font-size: 18px;
        }
        .jspsych-survey-html-form input[type="submit"] {
          font-size: 28px;
          padding: 30px 80px;
        }
        .survey-container {
          padding: 20px; /* Reduce padding for smaller screens */
        }
      }
    </style>
    
    <div class="survey-container">
      <h2>Post-Chatbot Survey: Emotional Connection</h2>
      
      <div class="question-container">
        <p class="question">7. Did you feel this agent was genuinely interested in what you had to say? (1 = Strongly Disagree, 5 = Very Agree)</p>
        <div class="options">
          <label><input type="radio" name="q7" value="1" required> 1</label>
          <label><input type="radio" name="q7" value="2"> 2</label>
          <label><input type="radio" name="q7" value="3"> 3</label>
          <label><input type="radio" name="q7" value="4"> 4</label>
          <label><input type="radio" name="q7" value="5"> 5</label>
        </div>
      </div>
      
      <div class="question-container">
        <p class="question">8. How much did this agent make you feel emotionally connected during the conversation? (1 = Not at all, 5 = Very Much)</p>
        <div class="options">
          <label><input type="radio" name="q8" value="1" required> 1</label>
          <label><input type="radio" name="q8" value="2"> 2</label>
          <label><input type="radio" name="q8" value="3"> 3</label>
          <label><input type="radio" name="q8" value="4"> 4</label>
          <label><input type="radio" name="q8" value="5"> 5</label>
        </div>
      </div>
      
      <div class="question-container">
        <p class="question">9. Did the agent seem empathetic or understanding toward your responses? (1 = Strongly Disagree, 5 = Very Agree)</p>
        <div class="options">
          <label><input type="radio" name="q9" value="1" required> 1</label>
          <label><input type="radio" name="q9" value="2"> 2</label>
          <label><input type="radio" name="q9" value="3"> 3</label>
          <label><input type="radio" name="q9" value="4"> 4</label>
          <label><input type="radio" name="q9" value="5"> 5</label>
        </div>
      </div>
      
      <div class="question-container">
        <p class="question">10. How would you describe the agentâ€™s use of humorâ€”did it add to or take away from the experience? (1 = Took Away, 5 = Added a Lot)</p>
        <div class="options">
          <label><input type="radio" name="q10" value="1" required> 1</label>
          <label><input type="radio" name="q10" value="2"> 2</label>
          <label><input type="radio" name="q10" value="3"> 3</label>
          <label><input type="radio" name="q10" value="4"> 4</label>
          <label><input type="radio" name="q10" value="5"> 5</label>
        </div>
      </div>
      
      <div class="question-container">
        <p class="question">11. Do you think the agentâ€™s personality influenced your experience positively? (1 = Strongly Disagree, 5 = Very Agree)</p>
        <div class="options">
          <label><input type="radio" name="q11" value="1" required> 1</label>
          <label><input type="radio" name="q11" value="2"> 2</label>
          <label><input type="radio" name="q11" value="3"> 3</label>
          <label><input type="radio" name="q11" value="4"> 4</label>
          <label><input type="radio" name="q11" value="5"> 5</label>
        </div>
      </div>
      
      <div class="question-container">
        <p class="question">12. How natural or fitting was the agent's tone and style of humor in this conversation? (1 = Very Inappropriate, 5 = Very Appropriate)</p>
        <div class="options">
          <label><input type="radio" name="q12" value="1" required> 1</label>
          <label><input type="radio" name="q12" value="2"> 2</label>
          <label><input type="radio" name="q12" value="3"> 3</label>
          <label><input type="radio" name="q12" value="4"> 4</label>
          <label><input type="radio" name="q12" value="5"> 5</label>
        </div>
      </div>
      
      <!-- The submit button is generated automatically by jsPsych and styled above -->
    </div>
  `,
  button_label: "Next",
  on_finish: function(data) {
    // Define your Google Apps Script web app URL here
    var url = "https://script.google.com/macros/s/AKfycbz3KN61mymNRZV5ReJ0zvowOBRCNm_uFQR4k8hK8dRWta74EFMpqkWnzhLsIDDEndUGcA/exec";
    
    // Send the survey data to Google Sheets
    fetch(url, {
      method: 'POST',
      mode: 'no-cors', 
      body: JSON.stringify(data),
      headers: { 'Content-Type': 'application/json' }
    })
    .then(response => response.json())
    .then(result => {
      console.log("Data successfully sent to Google Sheets:", result);
      // Optionally, you can add additional logic here after the data is sent
    })
    .catch(error => {
      console.error("Error sending data:", error);
    });
    
    console.log("Bot1 Emotional survey completed");
  }
};




// Page 5: Areas for Improvement
var survey_general_bot1 = {
  type: jsPsychSurveyHtmlForm,
  data: { bot: 'Bot1' },
  html: `
    <style>
      /* Global reset */
      body, html {
        margin: 0;
        padding: 0;
        font-family: 'Poppins', sans-serif;
        background-color: #f0f0f0;
      }
      
      /* Main container for the survey */
      .survey-container {
        max-width: 1200px; /* Adjust as needed */
        margin: 20px auto; /* Extra vertical space */
        padding: 40px;     /* Padding for breathing room */
      }
      
      /* Survey Title */
      h2 {
        text-align: center;
        margin-top: 20px;
        margin-bottom: 30px;
        font-size: 36px;
        color: #333;
      }
      
      /* Container for each question */
      .question-container {
        margin-bottom: 30px;
        padding: 0 20px;
      }
      
      /* Left-aligned question text */
      .question-container p.question {
        font-size: 22px;
        color: #555;
        text-align: left;
        margin: 20px 0 10px;
      }
      
      /* Textarea styling */
      .question-container textarea {
        width: 100%;
        font-size: 24px;
        padding: 10px;
        border: 1px solid #ccc;
        border-radius: 4px;
        resize: vertical;
      }
      
      /* Enhanced Submit Button Style */
      .jspsych-survey-html-form input[type="submit"] {
        display: block;
        margin: 0px auto 0px auto;  /* Adjust margin as needed */
        padding: 60px 130px;         /* Increased padding for a larger button */
        font-size: 36px;             /* Bigger font size */
        color: #fff;
        background: linear-gradient(45deg, #2575fc, #6a11cb);
        border: none;
        border-radius: 8px;
        cursor: pointer;
        box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
      }
      
      .jspsych-survey-html-form input[type="submit"]:hover {
        transform: scale(1.05);
        box-shadow: 0 6px 12px rgba(0,0,0,0.3);
      }
      
      /* Responsive Adjustments */
      @media (max-width: 600px) {
        h2 {
          font-size: 28px;
        }
        .question-container p.question {
          font-size: 18px;
        }
        .jspsych-survey-html-form input[type="submit"] {
          font-size: 28px;
          padding: 30px 80px;
        }
        .survey-container {
          padding: 20px; /* Reduce padding for smaller screens */
        }
      }
    </style>
    
    <div class="survey-container">
      <h2>Post-Chatbot Survey: General Impressions</h2>
      
      <div class="question-container">
        <p class="question">13. What was your favorite part of the conversation?</p>
        <textarea name="q13" rows="3" required></textarea>
      </div>
      
      <div class="question-container">
        <p class="question">14. Was there anything about the interaction that you found challenging or frustrating?</p>
        <textarea name="q14" rows="3" required></textarea>
      </div>
    </div>
  `,
  button_label: "Submit Survey",
  on_finish: function(data) {
    // Define your Google Apps Script web app URL here
    var url = "https://script.google.com/macros/s/AKfycbz3KN61mymNRZV5ReJ0zvowOBRCNm_uFQR4k8hK8dRWta74EFMpqkWnzhLsIDDEndUGcA/exec";
    
    // Send the survey data to Google Sheets
    fetch(url, {
      method: 'POST',
      mode: 'no-cors', 
      body: JSON.stringify(data),
      headers: { 'Content-Type': 'application/json' }
    })
    .then(response => response.json())
    .then(result => {
      console.log("Data successfully sent to Google Sheets:", result);
      // Optionally, you can add additional logic here after the data is sent
    })
    .catch(error => {
      console.error("Error sending data:", error);
    });
    
    console.log("Bot1 General survey completed");
  }
};

// Add all survey pages to the timeline
timeline.push(
  survey_engagement_bot1,
  survey_emotional_bot1,
  survey_general_bot1
);

var talk_to_agent_widget2 = {
  type: jsPsychHtmlButtonResponse,
  stimulus: `
  <div style="text-align: center; position: relative;">
  <h2 style="font-size: 48px; margin-bottom: 30px;">Talk to Jessica</h2>
  <p style="font-size: 24px; color: #555; margin-bottom: 20px;">
    Please click the 'Let's chat' button on the bottom-right corner to chat with the bot.
  </p>
  <p style="font-size:24px; color: #555;">
    You must chat with the bot for at least 5 minutes before you can proceed to the next bot.
  </p>
</div>
      <div id="widget-container" style="margin-top: 20px;"></div>
      <!-- The continue button is initially disabled -->
      <button id="continue-button" disabled style="
        display: block;
        margin: 20px auto;
        padding: 10px 20px;
        font-size: 16px;
        border: none;
        background-color: grey;
        color: #fff;
        border-radius: 5px;
        cursor: not-allowed;
      ">
        Continue
      </button>
    </div>
  `,
  choices: [], // No built-in choices, we handle response manually.
  trial_duration: null, // The trial waits indefinitely until finished.
  on_load: function() {
    // Insert the ElevenLabs widget into the container
    var container = document.getElementById("widget-container");
    var widget = document.createElement("elevenlabs-convai");
    widget.setAttribute("agent-id", "alq3yJL7ewDvA4vtKkHn");
    container.appendChild(widget);
    
    var script = document.createElement("script");
    script.src = "https://elevenlabs.io/convai-widget/index.js";
    script.async = true;
    script.type = "text/javascript";
    container.appendChild(script);
    
    // After 5 minutes (300000 ms), enable the Continue button.
    setTimeout(function() {
      var btn = document.getElementById("continue-button");
      btn.disabled = false;
      btn.style.backgroundColor = "black";
      btn.style.cursor = "pointer";
    }, 0);
    
    // Finish the trial when the Continue button is clicked (only if enabled).
    document.getElementById("continue-button").addEventListener("click", function() {
      if (!this.disabled) {
        jsPsych.finishTrial();
      }
    });
  }
};

timeline.push(talk_to_agent_widget2);

var survey_engagement_bot2 = {
  type: jsPsychSurveyHtmlForm,
  data: { bot: 'Bot2' },
  html: `
    <style>
      /* Global reset */
      body, html {
        margin: 0;
        padding: 0;
        font-family: 'Poppins', sans-serif;
        background-color: #f0f0f0;
      }
      
      /* Main container for the survey */
      .survey-container {
        max-width: 1200px; /* Adjust the max-width as needed */
        margin: 20px auto; /* Extra vertical space */
        padding: 40px; /* Padding for breathing room */
      }
      
      /* Survey Title */
      h2 {
        text-align: center;
        margin-top: 20px;
        margin-bottom: 30px;
        font-size: 36px;
        color: #333;
      }
      
      /* Container for each question */
      .question-container {
        margin-bottom: 0px;
        padding: 0 20px;
      }
      
      /* Left-aligned question text */
      .question-container p.question {
        font-size: 22px;
        color: #555;
        text-align: left;
        margin: 20px 0 10px;
      }
      
      /* Options are centered and evenly spread */
      .options {
        display: flex;
        justify-content: space-evenly;
        align-items: center;
      }
      
      .options label {
        cursor: pointer;
        font-size: 20px;
        color: #333;
      }
      
      .options input[type="radio"] {
        margin-right: 5px;
        transform: scale(1.2);
      }
      
      /* Enhanced Submit Button Style */
      .jspsych-survey-html-form input[type="submit"] {
        display: block;
        margin: 0px auto 0px auto;  /* Reduced margin to bring the button closer to the content */
        padding: 60px 130px;         /* Increased padding for a larger button */
        font-size: 36px;             /* Bigger font size */
        color: #fff;
        background: linear-gradient(45deg, #2575fc, #6a11cb);
        border: none;
        border-radius: 8px;
        cursor: pointer;
        box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
      }
      
      .jspsych-survey-html-form input[type="submit"]:hover {
        transform: scale(1.05);
        box-shadow: 0 6px 12px rgba(0,0,0,0.3);
      }
      
      /* Responsive Adjustments */
      @media (max-width: 600px) {
        h2 {
          font-size: 28px;
        }
        .question-container p.question {
          font-size: 18px;
        }
        .jspsych-survey-html-form input[type="submit"] {
          font-size: 28px;
          padding: 30px 80px;
        }
        .survey-container {
          padding: 20px; /* Reduce padding for smaller screens */
        }
      }
    </style>
    
    <div class="survey-container">
      <h2>Post-Chatbot Survey: Engagement and Approachability</h2>
      
      <div class="question-container">
        <p class="question">1. How easy or difficult was it to engage in conversation with this agent? (1 = Very Difficult, 5 = Very Easy)</p>
        <div class="options">
          <label><input type="radio" name="q1" value="1" required> 1</label>
          <label><input type="radio" name="q1" value="2"> 2</label>
          <label><input type="radio" name="q1" value="3"> 3</label>
          <label><input type="radio" name="q1" value="4"> 4</label>
          <label><input type="radio" name="q1" value="5"> 5</label>
        </div>
      </div>
      
      <div class="question-container">
        <p class="question">2. Did this agent feel friendly and approachable to you? (1 = Strongly Disagree, 5 = Very Agree)</p>
        <div class="options">
          <label><input type="radio" name="q2" value="1" required> 1</label>
          <label><input type="radio" name="q2" value="2"> 2</label>
          <label><input type="radio" name="q2" value="3"> 3</label>
          <label><input type="radio" name="q2" value="4"> 4</label>
          <label><input type="radio" name="q2" value="5"> 5</label>
        </div>
      </div>
      
      <div class="question-container">
        <p class="question">3. How would you rate this agentâ€™s engagement level and friendliness? (1 = Very Low, 5 = Very High)</p>
        <div class="options">
          <label><input type="radio" name="q3" value="1" required> 1</label>
          <label><input type="radio" name="q3" value="2"> 2</label>
          <label><input type="radio" name="q3" value="3"> 3</label>
          <label><input type="radio" name="q3" value="4"> 4</label>
          <label><input type="radio" name="q3" value="5"> 5</label>
        </div>
      </div>
      
      <div class="question-container">
        <p class="question">4. How natural did the conversation feel with this agent overall? (1 = Not Natural, 5 = Very Natural)</p>
        <div class="options">
          <label><input type="radio" name="q4" value="1" required> 1</label>
          <label><input type="radio" name="q4" value="2"> 2</label>
          <label><input type="radio" name="q4" value="3"> 3</label>
          <label><input type="radio" name="q4" value="4"> 4</label>
          <label><input type="radio" name="q4" value="5"> 5</label>
        </div>
      </div>
      
      <div class="question-container">
        <p class="question">5. Did the agentâ€™s tone or language make you feel comfortable sharing your thoughts? (1 = Strongly Disagree, 5 = Very Agree)</p>
        <div class="options">
          <label><input type="radio" name="q5" value="1" required> 1</label>
          <label><input type="radio" name="q5" value="2"> 2</label>
          <label><input type="radio" name="q5" value="3"> 3</label>
          <label><input type="radio" name="q5" value="4"> 4</label>
          <label><input type="radio" name="q5" value="5"> 5</label>
        </div>
      </div>
      
      <div class="question-container">
        <p class="question">6. Did the timing and pauses in the conversation feel natural, or were they distracting? (1 = Very Distracting, 5 = Very Natural)</p>
        <div class="options">
          <label><input type="radio" name="q6" value="1" required> 1</label>
          <label><input type="radio" name="q6" value="2"> 2</label>
          <label><input type="radio" name="q6" value="3"> 3</label>
          <label><input type="radio" name="q6" value="4"> 4</label>
          <label><input type="radio" name="q6" value="5"> 5</label>
        </div>
      </div>
      
      <!-- The submit button is generated automatically by jsPsych and styled above -->
    </div>
  `,
  button_label: "Next",
  on_finish: function(data) {
    // Define your Google Apps Script web app URL here
    var url = "https://script.google.com/macros/s/AKfycbyKUBe5G8qaCHeewMsg-E3AP0PiiNvTIc8Ym3_NQB2IbQ-Ki-zDCFYzaZT22zzQEoEc/exec";
    
    // Send the survey data to Google Sheets
    fetch(url, {
      method: 'POST',
      body: JSON.stringify(data),
      headers: { 'Content-Type': 'application/json' }
    })
    .then(response => response.json())
    .then(result => {
      console.log("Data successfully sent to Google Sheets:", result);
      // Optionally, you can add additional logic here after the data is sent
    })
    .catch(error => {
      console.error("Error sending data:", error);
    });
    
    console.log("Bot2 Engagement survey completed");
  }
};


     // Page 2: Engagement and Approachability
     var survey_emotional_bot2 = {
  type: jsPsychSurveyHtmlForm,
  data: { bot: 'Bot2' },
  html: `
    <style>
      /* Global reset */
      body, html {
        margin: 0;
        padding: 0;
        font-family: 'Poppins', sans-serif;
        background-color: #f0f0f0;
      }
      
      /* Main container for the survey */
      .survey-container {
        max-width: 1200px; /* Adjust the max-width as needed */
        margin: -20px auto; /* Extra vertical space */
        padding: 40px; /* Padding for breathing room */
      }
      
      /* Survey Title */
      h2 {
        text-align: center;
        margin-top: 20px;
        margin-bottom: 30px;
        font-size: 36px;
        color: #333;
      }
      
      /* Container for each question */
      .question-container {
        margin-bottom: 0px;
        padding: 0 20px;
      }
      
      /* Left-aligned question text */
      .question-container p.question {
        font-size: 22px;
        color: #555;
        text-align: left;
        margin: 20px 0 10px;
      }
      
      /* Options are centered and evenly spread */
      .options {
        display: flex;
        justify-content: space-evenly;
        align-items: center;
      }
      
      .options label {
        cursor: pointer;
        font-size: 20px;
        color: #333;
      }
      
      .options input[type="radio"] {
        margin-right: 5px;
        transform: scale(1.2);
      }
      
      /* Enhanced Submit Button Style */
      .jspsych-survey-html-form input[type="submit"] {
        display: block;
        margin: -50px auto 0px auto;  /* Reduced margin to bring the button closer to the content */
        padding: 60px 130px;         /* Increased padding for a larger button */
        font-size: 36px;             /* Bigger font size */
        color: #fff;
        background: linear-gradient(45deg, #2575fc, #6a11cb);
        border: none;
        border-radius: 8px;
        cursor: pointer;
        box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
      }
      
      .jspsych-survey-html-form input[type="submit"]:hover {
        transform: scale(1.05);
        box-shadow: 0 6px 12px rgba(0,0,0,0.3);
      }
      
      /* Responsive Adjustments */
      @media (max-width: 600px) {
        h2 {
          font-size: 28px;
        }
        .question-container p.question {
          font-size: 18px;
        }
        .jspsych-survey-html-form input[type="submit"] {
          font-size: 28px;
          padding: 30px 80px;
        }
        .survey-container {
          padding: 20px; /* Reduce padding for smaller screens */
        }
      }
    </style>
    
    <div class="survey-container">
      <h2>Post-Chatbot Survey: Emotional Connection</h2>
      
      <div class="question-container">
        <p class="question">7. Did you feel this agent was genuinely interested in what you had to say? (1 = Strongly Disagree, 5 = Very Agree)</p>
        <div class="options">
          <label><input type="radio" name="q7" value="1" required> 1</label>
          <label><input type="radio" name="q7" value="2"> 2</label>
          <label><input type="radio" name="q7" value="3"> 3</label>
          <label><input type="radio" name="q7" value="4"> 4</label>
          <label><input type="radio" name="q7" value="5"> 5</label>
        </div>
      </div>
      
      <div class="question-container">
        <p class="question">8. How much did this agent make you feel emotionally connected during the conversation? (1 = Not at all, 5 = Very Much)</p>
        <div class="options">
          <label><input type="radio" name="q8" value="1" required> 1</label>
          <label><input type="radio" name="q8" value="2"> 2</label>
          <label><input type="radio" name="q8" value="3"> 3</label>
          <label><input type="radio" name="q8" value="4"> 4</label>
          <label><input type="radio" name="q8" value="5"> 5</label>
        </div>
      </div>
      
      <div class="question-container">
        <p class="question">9. Did the agent seem empathetic or understanding toward your responses? (1 = Strongly Disagree, 5 = Very Agree)</p>
        <div class="options">
          <label><input type="radio" name="q9" value="1" required> 1</label>
          <label><input type="radio" name="q9" value="2"> 2</label>
          <label><input type="radio" name="q9" value="3"> 3</label>
          <label><input type="radio" name="q9" value="4"> 4</label>
          <label><input type="radio" name="q9" value="5"> 5</label>
        </div>
      </div>
      
      <div class="question-container">
        <p class="question">10. How would you describe the agentâ€™s use of humorâ€”did it add to or take away from the experience? (1 = Took Away, 5 = Added a Lot)</p>
        <div class="options">
          <label><input type="radio" name="q10" value="1" required> 1</label>
          <label><input type="radio" name="q10" value="2"> 2</label>
          <label><input type="radio" name="q10" value="3"> 3</label>
          <label><input type="radio" name="q10" value="4"> 4</label>
          <label><input type="radio" name="q10" value="5"> 5</label>
        </div>
      </div>
      
      <div class="question-container">
        <p class="question">11. Do you think the agentâ€™s personality influenced your experience positively? (1 = Strongly Disagree, 5 = Very Agree)</p>
        <div class="options">
          <label><input type="radio" name="q11" value="1" required> 1</label>
          <label><input type="radio" name="q11" value="2"> 2</label>
          <label><input type="radio" name="q11" value="3"> 3</label>
          <label><input type="radio" name="q11" value="4"> 4</label>
          <label><input type="radio" name="q11" value="5"> 5</label>
        </div>
      </div>
      
      <div class="question-container">
        <p class="question">12. How natural or fitting was the agent's tone and style of humor in this conversation? (1 = Very Inappropriate, 5 = Very Appropriate)</p>
        <div class="options">
          <label><input type="radio" name="q12" value="1" required> 1</label>
          <label><input type="radio" name="q12" value="2"> 2</label>
          <label><input type="radio" name="q12" value="3"> 3</label>
          <label><input type="radio" name="q12" value="4"> 4</label>
          <label><input type="radio" name="q12" value="5"> 5</label>
        </div>
      </div>
      
      <!-- The submit button is generated automatically by jsPsych and styled above -->
    </div>
  `,
  button_label: "Next",
  on_finish: function(data) {
    // Define your Google Apps Script web app URL here
    var url = "https://script.google.com/macros/s/AKfycbyKUBe5G8qaCHeewMsg-E3AP0PiiNvTIc8Ym3_NQB2IbQ-Ki-zDCFYzaZT22zzQEoEc/exec";
    
    // Send the survey data to Google Sheets
    fetch(url, {
      method: 'POST',
      body: JSON.stringify(data),
      headers: { 'Content-Type': 'application/json' }
    })
    .then(response => response.json())
    .then(result => {
      console.log("Data successfully sent to Google Sheets:", result);
      // Optionally, you can add additional logic here after the data is sent
    })
    .catch(error => {
      console.error("Error sending data:", error);
    });
    
    console.log("Bot2 Emotional survey completed");
  }
};




// Page 5: Areas for Improvement
var survey_general_bot2 = {
  type: jsPsychSurveyHtmlForm,
  data: { bot: 'Bot2' },
  html: `
    <style>
      /* Global reset */
      body, html {
        margin: 0;
        padding: 0;
        font-family: 'Poppins', sans-serif;
        background-color: #f0f0f0;
      }
      
      /* Main container for the survey */
      .survey-container {
        max-width: 1200px; /* Adjust as needed */
        margin: 20px auto; /* Extra vertical space */
        padding: 40px;     /* Padding for breathing room */
      }
      
      /* Survey Title */
      h2 {
        text-align: center;
        margin-top: 20px;
        margin-bottom: 30px;
        font-size: 36px;
        color: #333;
      }
      
      /* Container for each question */
      .question-container {
        margin-bottom: 30px;
        padding: 0 20px;
      }
      
      /* Left-aligned question text */
      .question-container p.question {
        font-size: 22px;
        color: #555;
        text-align: left;
        margin: 20px 0 10px;
      }
      
      /* Textarea styling */
      .question-container textarea {
        width: 100%;
        font-size: 24px;
        padding: 10px;
        border: 1px solid #ccc;
        border-radius: 4px;
        resize: vertical;
      }
      
      /* Enhanced Submit Button Style */
      .jspsych-survey-html-form input[type="submit"] {
        display: block;
        margin: 0px auto 0px auto;  /* Adjust margin as needed */
        padding: 60px 130px;         /* Increased padding for a larger button */
        font-size: 36px;             /* Bigger font size */
        color: #fff;
        background: linear-gradient(45deg, #2575fc, #6a11cb);
        border: none;
        border-radius: 8px;
        cursor: pointer;
        box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
      }
      
      .jspsych-survey-html-form input[type="submit"]:hover {
        transform: scale(1.05);
        box-shadow: 0 6px 12px rgba(0,0,0,0.3);
      }
      
      /* Responsive Adjustments */
      @media (max-width: 600px) {
        h2 {
          font-size: 28px;
        }
        .question-container p.question {
          font-size: 18px;
        }
        .jspsych-survey-html-form input[type="submit"] {
          font-size: 28px;
          padding: 30px 80px;
        }
        .survey-container {
          padding: 20px; /* Reduce padding for smaller screens */
        }
      }
    </style>
    
    <div class="survey-container">
      <h2>Post-Chatbot Survey: General Impressions</h2>
      
      <div class="question-container">
        <p class="question">13. What was your favorite part of the conversation?</p>
        <textarea name="q13" rows="3" required></textarea>
      </div>
      
      <div class="question-container">
        <p class="question">14. Was there anything about the interaction that you found challenging or frustrating?</p>
        <textarea name="q14" rows="3" required></textarea>
      </div>
    </div>
  `,
  button_label: "Submit Survey",
  on_finish: function(data) {
    // Define your Google Apps Script web app URL here
    var url = "https://script.google.com/macros/s/AKfycbyKUBe5G8qaCHeewMsg-E3AP0PiiNvTIc8Ym3_NQB2IbQ-Ki-zDCFYzaZT22zzQEoEc/exec";
    
    // Send the survey data to Google Sheets
    fetch(url, {
      method: 'POST',
      body: JSON.stringify(data),
      headers: { 'Content-Type': 'application/json' }
    })
    .then(response => response.json())
    .then(result => {
      console.log("Data successfully sent to Google Sheets:", result);
      // Optionally, you can add additional logic here after the data is sent
    })
    .catch(error => {
      console.error("Error sending data:", error);
    });
    
    console.log("Bot2 General survey completed");
  }
};

// Add all survey pages to the timeline
timeline.push(
  survey_engagement_bot2,
  survey_emotional_bot2,
  survey_general_bot2
);


var talk_to_agent_widget3 = {
  type: jsPsychHtmlButtonResponse,
  stimulus: `
  <div style="text-align: center; position: relative;">
  <h2 style="font-size: 48px; margin-bottom: 30px;">Talk to Alice</h2>
  <p style="font-size: 24px; color: #555; margin-bottom: 20px;">
    Please click the 'Let's chat' button on the bottom-right corner to chat with the bot.
  </p>
  <p style="font-size:24px; color: #555;">
    You must chat with the bot for at least 5 minutes before you can proceed to the next bot.
  </p>
</div>
      <div id="widget-container" style="margin-top: 20px;"></div>
      <!-- The continue button is initially disabled -->
      <button id="continue-button" disabled style="
        display: block;
        margin: 20px auto;
        padding: 10px 20px;
        font-size: 16px;
        border: none;
        background-color: grey;
        color: #fff;
        border-radius: 5px;
        cursor: not-allowed;
      ">
        Continue
      </button>
    </div>
  `,
  choices: [], // No built-in choices, we handle response manually.
  trial_duration: null, // The trial waits indefinitely until finished.
  on_load: function() {
    // Insert the ElevenLabs widget into the container
    var container = document.getElementById("widget-container");
    var widget = document.createElement("elevenlabs-convai");
    widget.setAttribute("agent-id", "2nocsEj5bsb5bvDdJ5ld");
    container.appendChild(widget);
    
    var script = document.createElement("script");
    script.src = "https://elevenlabs.io/convai-widget/index.js";
    script.async = true;
    script.type = "text/javascript";
    container.appendChild(script);
    
    // After 5 minutes (300000 ms), enable the Continue button.
    setTimeout(function() {
      var btn = document.getElementById("continue-button");
      btn.disabled = false;
      btn.style.backgroundColor = "black";
      btn.style.cursor = "pointer";
    }, 0);
    
    // Finish the trial when the Continue button is clicked (only if enabled).
    document.getElementById("continue-button").addEventListener("click", function() {
      if (!this.disabled) {
        jsPsych.finishTrial();
      }
    });
  }
};

timeline.push(talk_to_agent_widget3);

var survey_engagement_bot3 = {
  type: jsPsychSurveyHtmlForm,
  data: { bot: 'Bot3' },
  html: `
    <style>
      /* Global reset */
      body, html {
        margin: 0;
        padding: 0;
        font-family: 'Poppins', sans-serif;
        background-color: #f0f0f0;
      }
      
      /* Main container for the survey */
      .survey-container {
        max-width: 1200px; /* Adjust the max-width as needed */
        margin: 20px auto; /* Extra vertical space */
        padding: 40px; /* Padding for breathing room */
      }
      
      /* Survey Title */
      h2 {
        text-align: center;
        margin-top: 20px;
        margin-bottom: 30px;
        font-size: 36px;
        color: #333;
      }
      
      /* Container for each question */
      .question-container {
        margin-bottom: 0px;
        padding: 0 20px;
      }
      
      /* Left-aligned question text */
      .question-container p.question {
        font-size: 22px;
        color: #555;
        text-align: left;
        margin: 20px 0 10px;
      }
      
      /* Options are centered and evenly spread */
      .options {
        display: flex;
        justify-content: space-evenly;
        align-items: center;
      }
      
      .options label {
        cursor: pointer;
        font-size: 20px;
        color: #333;
      }
      
      .options input[type="radio"] {
        margin-right: 5px;
        transform: scale(1.2);
      }
      
      /* Enhanced Submit Button Style */
      .jspsych-survey-html-form input[type="submit"] {
        display: block;
        margin: 0px auto 0px auto;  /* Reduced margin to bring the button closer to the content */
        padding: 60px 130px;         /* Increased padding for a larger button */
        font-size: 36px;             /* Bigger font size */
        color: #fff;
        background: linear-gradient(45deg, #2575fc, #6a11cb);
        border: none;
        border-radius: 8px;
        cursor: pointer;
        box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
      }
      
      .jspsych-survey-html-form input[type="submit"]:hover {
        transform: scale(1.05);
        box-shadow: 0 6px 12px rgba(0,0,0,0.3);
      }
      
      /* Responsive Adjustments */
      @media (max-width: 600px) {
        h2 {
          font-size: 28px;
        }
        .question-container p.question {
          font-size: 18px;
        }
        .jspsych-survey-html-form input[type="submit"] {
          font-size: 28px;
          padding: 30px 80px;
        }
        .survey-container {
          padding: 20px; /* Reduce padding for smaller screens */
        }
      }
    </style>
    
    <div class="survey-container">
      <h2>Post-Chatbot Survey: Engagement and Approachability</h2>
      
      <div class="question-container">
        <p class="question">1. How easy or difficult was it to engage in conversation with this agent? (1 = Very Difficult, 5 = Very Easy)</p>
        <div class="options">
          <label><input type="radio" name="q1" value="1" required> 1</label>
          <label><input type="radio" name="q1" value="2"> 2</label>
          <label><input type="radio" name="q1" value="3"> 3</label>
          <label><input type="radio" name="q1" value="4"> 4</label>
          <label><input type="radio" name="q1" value="5"> 5</label>
        </div>
      </div>
      
      <div class="question-container">
        <p class="question">2. Did this agent feel friendly and approachable to you? (1 = Strongly Disagree, 5 = Very Agree)</p>
        <div class="options">
          <label><input type="radio" name="q2" value="1" required> 1</label>
          <label><input type="radio" name="q2" value="2"> 2</label>
          <label><input type="radio" name="q2" value="3"> 3</label>
          <label><input type="radio" name="q2" value="4"> 4</label>
          <label><input type="radio" name="q2" value="5"> 5</label>
        </div>
      </div>
      
      <div class="question-container">
        <p class="question">3. How would you rate this agentâ€™s engagement level and friendliness? (1 = Very Low, 5 = Very High)</p>
        <div class="options">
          <label><input type="radio" name="q3" value="1" required> 1</label>
          <label><input type="radio" name="q3" value="2"> 2</label>
          <label><input type="radio" name="q3" value="3"> 3</label>
          <label><input type="radio" name="q3" value="4"> 4</label>
          <label><input type="radio" name="q3" value="5"> 5</label>
        </div>
      </div>
      
      <div class="question-container">
        <p class="question">4. How natural did the conversation feel with this agent overall? (1 = Not Natural, 5 = Very Natural)</p>
        <div class="options">
          <label><input type="radio" name="q4" value="1" required> 1</label>
          <label><input type="radio" name="q4" value="2"> 2</label>
          <label><input type="radio" name="q4" value="3"> 3</label>
          <label><input type="radio" name="q4" value="4"> 4</label>
          <label><input type="radio" name="q4" value="5"> 5</label>
        </div>
      </div>
      
      <div class="question-container">
        <p class="question">5. Did the agentâ€™s tone or language make you feel comfortable sharing your thoughts? (1 = Strongly Disagree, 5 = Very Agree)</p>
        <div class="options">
          <label><input type="radio" name="q5" value="1" required> 1</label>
          <label><input type="radio" name="q5" value="2"> 2</label>
          <label><input type="radio" name="q5" value="3"> 3</label>
          <label><input type="radio" name="q5" value="4"> 4</label>
          <label><input type="radio" name="q5" value="5"> 5</label>
        </div>
      </div>
      
      <div class="question-container">
        <p class="question">6. Did the timing and pauses in the conversation feel natural, or were they distracting? (1 = Very Distracting, 5 = Very Natural)</p>
        <div class="options">
          <label><input type="radio" name="q6" value="1" required> 1</label>
          <label><input type="radio" name="q6" value="2"> 2</label>
          <label><input type="radio" name="q6" value="3"> 3</label>
          <label><input type="radio" name="q6" value="4"> 4</label>
          <label><input type="radio" name="q6" value="5"> 5</label>
        </div>
      </div>
      
      <!-- The submit button is generated automatically by jsPsych and styled above -->
    </div>
  `,
  button_label: "Next",
  on_finish: function(data) {
    // Define your Google Apps Script web app URL here
    var url = "https://script.google.com/macros/s/AKfycbwRCmxVjzCu5lNFumTx-nFCku4CMU7uSXLty6QqhH88e3Rk0bWGIDUYsZrH0MiC0eeUbQ/exec";
    
    // Send the survey data to Google Sheets
    fetch(url, {
      method: 'POST',
      body: JSON.stringify(data),
      headers: { 'Content-Type': 'application/json' }
    })
    .then(response => response.json())
    .then(result => {
      console.log("Data successfully sent to Google Sheets:", result);
      // Optionally, you can add additional logic here after the data is sent
    })
    .catch(error => {
      console.error("Error sending data:", error);
    });
    
    console.log("Bot3 Engagement survey completed");
  }
};


     // Page 2: Engagement and Approachability
     var survey_emotional_bot3 = {
  type: jsPsychSurveyHtmlForm,
  data: { bot: 'Bot3' },
  html: `
    <style>
      /* Global reset */
      body, html {
        margin: 0;
        padding: 0;
        font-family: 'Poppins', sans-serif;
        background-color: #f0f0f0;
      }
      
      /* Main container for the survey */
      .survey-container {
        max-width: 1200px; /* Adjust the max-width as needed */
        margin: -20px auto; /* Extra vertical space */
        padding: 40px; /* Padding for breathing room */
      }
      
      /* Survey Title */
      h2 {
        text-align: center;
        margin-top: 20px;
        margin-bottom: 30px;
        font-size: 36px;
        color: #333;
      }
      
      /* Container for each question */
      .question-container {
        margin-bottom: 0px;
        padding: 0 20px;
      }
      
      /* Left-aligned question text */
      .question-container p.question {
        font-size: 22px;
        color: #555;
        text-align: left;
        margin: 20px 0 10px;
      }
      
      /* Options are centered and evenly spread */
      .options {
        display: flex;
        justify-content: space-evenly;
        align-items: center;
      }
      
      .options label {
        cursor: pointer;
        font-size: 20px;
        color: #333;
      }
      
      .options input[type="radio"] {
        margin-right: 5px;
        transform: scale(1.2);
      }
      
      /* Enhanced Submit Button Style */
      .jspsych-survey-html-form input[type="submit"] {
        display: block;
        margin: -50px auto 0px auto;  /* Reduced margin to bring the button closer to the content */
        padding: 60px 130px;         /* Increased padding for a larger button */
        font-size: 36px;             /* Bigger font size */
        color: #fff;
        background: linear-gradient(45deg, #2575fc, #6a11cb);
        border: none;
        border-radius: 8px;
        cursor: pointer;
        box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
      }
      
      .jspsych-survey-html-form input[type="submit"]:hover {
        transform: scale(1.05);
        box-shadow: 0 6px 12px rgba(0,0,0,0.3);
      }
      
      /* Responsive Adjustments */
      @media (max-width: 600px) {
        h2 {
          font-size: 28px;
        }
        .question-container p.question {
          font-size: 18px;
        }
        .jspsych-survey-html-form input[type="submit"] {
          font-size: 28px;
          padding: 30px 80px;
        }
        .survey-container {
          padding: 20px; /* Reduce padding for smaller screens */
        }
      }
    </style>
    
    <div class="survey-container">
      <h2>Post-Chatbot Survey: Emotional Connection</h2>
      
      <div class="question-container">
        <p class="question">7. Did you feel this agent was genuinely interested in what you had to say? (1 = Strongly Disagree, 5 = Very Agree)</p>
        <div class="options">
          <label><input type="radio" name="q7" value="1" required> 1</label>
          <label><input type="radio" name="q7" value="2"> 2</label>
          <label><input type="radio" name="q7" value="3"> 3</label>
          <label><input type="radio" name="q7" value="4"> 4</label>
          <label><input type="radio" name="q7" value="5"> 5</label>
        </div>
      </div>
      
      <div class="question-container">
        <p class="question">8. How much did this agent make you feel emotionally connected during the conversation? (1 = Not at all, 5 = Very Much)</p>
        <div class="options">
          <label><input type="radio" name="q8" value="1" required> 1</label>
          <label><input type="radio" name="q8" value="2"> 2</label>
          <label><input type="radio" name="q8" value="3"> 3</label>
          <label><input type="radio" name="q8" value="4"> 4</label>
          <label><input type="radio" name="q8" value="5"> 5</label>
        </div>
      </div>
      
      <div class="question-container">
        <p class="question">9. Did the agent seem empathetic or understanding toward your responses? (1 = Strongly Disagree, 5 = Very Agree)</p>
        <div class="options">
          <label><input type="radio" name="q9" value="1" required> 1</label>
          <label><input type="radio" name="q9" value="2"> 2</label>
          <label><input type="radio" name="q9" value="3"> 3</label>
          <label><input type="radio" name="q9" value="4"> 4</label>
          <label><input type="radio" name="q9" value="5"> 5</label>
        </div>
      </div>
      
      <div class="question-container">
        <p class="question">10. How would you describe the agentâ€™s use of humorâ€”did it add to or take away from the experience? (1 = Took Away, 5 = Added a Lot)</p>
        <div class="options">
          <label><input type="radio" name="q10" value="1" required> 1</label>
          <label><input type="radio" name="q10" value="2"> 2</label>
          <label><input type="radio" name="q10" value="3"> 3</label>
          <label><input type="radio" name="q10" value="4"> 4</label>
          <label><input type="radio" name="q10" value="5"> 5</label>
        </div>
      </div>
      
      <div class="question-container">
        <p class="question">11. Do you think the agentâ€™s personality influenced your experience positively? (1 = Strongly Disagree, 5 = Very Agree)</p>
        <div class="options">
          <label><input type="radio" name="q11" value="1" required> 1</label>
          <label><input type="radio" name="q11" value="2"> 2</label>
          <label><input type="radio" name="q11" value="3"> 3</label>
          <label><input type="radio" name="q11" value="4"> 4</label>
          <label><input type="radio" name="q11" value="5"> 5</label>
        </div>
      </div>
      
      <div class="question-container">
        <p class="question">12. How natural or fitting was the agent's tone and style of humor in this conversation? (1 = Very Inappropriate, 5 = Very Appropriate)</p>
        <div class="options">
          <label><input type="radio" name="q12" value="1" required> 1</label>
          <label><input type="radio" name="q12" value="2"> 2</label>
          <label><input type="radio" name="q12" value="3"> 3</label>
          <label><input type="radio" name="q12" value="4"> 4</label>
          <label><input type="radio" name="q12" value="5"> 5</label>
        </div>
      </div>
      
      <!-- The submit button is generated automatically by jsPsych and styled above -->
    </div>
  `,
  button_label: "Next",
  on_finish: function(data) {
    // Define your Google Apps Script web app URL here
    var url = "https://script.google.com/macros/s/AKfycbwRCmxVjzCu5lNFumTx-nFCku4CMU7uSXLty6QqhH88e3Rk0bWGIDUYsZrH0MiC0eeUbQ/exec";
    
    // Send the survey data to Google Sheets
    fetch(url, {
      method: 'POST',
      body: JSON.stringify(data),
      headers: { 'Content-Type': 'application/json' }
    })
    .then(response => response.json())
    .then(result => {
      console.log("Data successfully sent to Google Sheets:", result);
      // Optionally, you can add additional logic here after the data is sent
    })
    .catch(error => {
      console.error("Error sending data:", error);
    });
    
    console.log("Bot3 Emotional survey completed");
  }
};




// Page 5: Areas for Improvement
var survey_general_bot3 = {
  type: jsPsychSurveyHtmlForm,
  data: { bot: 'Bot3' },
  html: `
    <style>
      /* Global reset */
      body, html {
        margin: 0;
        padding: 0;
        font-family: 'Poppins', sans-serif;
        background-color: #f0f0f0;
      }
      
      /* Main container for the survey */
      .survey-container {
        max-width: 1200px; /* Adjust as needed */
        margin: 20px auto; /* Extra vertical space */
        padding: 40px;     /* Padding for breathing room */
      }
      
      /* Survey Title */
      h2 {
        text-align: center;
        margin-top: 20px;
        margin-bottom: 30px;
        font-size: 36px;
        color: #333;
      }
      
      /* Container for each question */
      .question-container {
        margin-bottom: 30px;
        padding: 0 20px;
      }
      
      /* Left-aligned question text */
      .question-container p.question {
        font-size: 22px;
        color: #555;
        text-align: left;
        margin: 20px 0 10px;
      }
      
      /* Textarea styling */
      .question-container textarea {
        width: 100%;
        font-size: 24px;
        padding: 10px;
        border: 1px solid #ccc;
        border-radius: 4px;
        resize: vertical;
      }
      
      /* Enhanced Submit Button Style */
      .jspsych-survey-html-form input[type="submit"] {
        display: block;
        margin: 0px auto 0px auto;  /* Adjust margin as needed */
        padding: 60px 130px;         /* Increased padding for a larger button */
        font-size: 36px;             /* Bigger font size */
        color: #fff;
        background: linear-gradient(45deg, #2575fc, #6a11cb);
        border: none;
        border-radius: 8px;
        cursor: pointer;
        box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
      }
      
      .jspsych-survey-html-form input[type="submit"]:hover {
        transform: scale(1.05);
        box-shadow: 0 6px 12px rgba(0,0,0,0.3);
      }
      
      /* Responsive Adjustments */
      @media (max-width: 600px) {
        h2 {
          font-size: 28px;
        }
        .question-container p.question {
          font-size: 18px;
        }
        .jspsych-survey-html-form input[type="submit"] {
          font-size: 28px;
          padding: 30px 80px;
        }
        .survey-container {
          padding: 20px; /* Reduce padding for smaller screens */
        }
      }
    </style>
    
    <div class="survey-container">
      <h2>Post-Chatbot Survey: General Impressions</h2>
      
      <div class="question-container">
        <p class="question">13. What was your favorite part of the conversation?</p>
        <textarea name="q13" rows="3" required></textarea>
      </div>
      
      <div class="question-container">
        <p class="question">14. Was there anything about the interaction that you found challenging or frustrating?</p>
        <textarea name="q14" rows="3" required></textarea>
      </div>
    </div>
  `,
  button_label: "Submit Survey",
  on_finish: function(data) {
    // Define your Google Apps Script web app URL here
    var url = "https://script.google.com/macros/s/AKfycbwRCmxVjzCu5lNFumTx-nFCku4CMU7uSXLty6QqhH88e3Rk0bWGIDUYsZrH0MiC0eeUbQ/exec";
    
    // Send the survey data to Google Sheets
    fetch(url, {
      method: 'POST',
      body: JSON.stringify(data),
      headers: { 'Content-Type': 'application/json' }
    })
    .then(response => response.json())
    .then(result => {
      console.log("Data successfully sent to Google Sheets:", result);
      // Optionally, you can add additional logic here after the data is sent
    })
    .catch(error => {
      console.error("Error sending data:", error);
    });
    
    console.log("Bot3 General survey completed");
  }
};
// Add all survey pages to the timeline
timeline.push(
  survey_engagement_bot3,
  survey_emotional_bot3,
  survey_general_bot3
);

      
      // Define Thank You trial
      var thank_you_page = {
        type: jsPsychHtmlKeyboardResponse,
        stimulus: `
          <div style="text-align: center; font-size: 18px; line-height: 1.6;">
            <h1 style="font-size: 24px; color: #4a4a4a;">Thank You for Participating!</h1>
            <p>We greatly appreciate your participation in this study.</p>
            <p><strong>Debriefing:</strong></p>
            <p>This study aims to investigate how individuals learn associations between words and objects through exposure to varying visual and auditory stimuli.</p>
            <p>Your responses will help us better understand learning processes and may contribute to the design of future educational and cognitive models.</p>
            <p>If you have any questions about this study or your participation, please contact us:</p>
            <p>Emails:</p>
            <ul style="list-style-type: none; padding: 0;">
              <li><a href="mailto:hjunyi@ucsd.edu">hjunyi@ucsd.edu</a></li>
            </ul>
            <p>Press any key to exit.</p>
          </div>
        `,
      };
      timeline.push(thank_you_page);
      
      // Run the jsPsych experiment
      jsPsych.run(timeline);
    </script>
  </body>
</html>
